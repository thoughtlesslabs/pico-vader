pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
	cls()
	x = 50
	y = 50
	dx =0
	dy =0
	sprites={1,3,3,5,5,3,3}
	s=1
end

function _update60()
	dy += 0.5

	if btn(0) then
		flipx = true
		dx = -2
	end
	if btn(1) then
		flipx = false
		dx = 2
	end
	if btnp(2) then
		if not jumping then
			dy = -5
			jumping = true
		else
			dy = 0
			jumping = false
		end
	end
		

	if btnp(4) then
		swinging = true
		timer = 5
	end
	
	if swinging then
		if timer < 0 then
			if s <= #sprites then
				s +=1
				timer = 5
			end
		elseif s == #sprites then
				s = 1
				swinging = false	
		end
		timer -=1.25
	end
	
	if not jumping then
		dx = dx / 1.2
	end
	
	if abs(dy) <= 0.5 then
		jumping = false
	end
	
	x += dx
	y += dy
	
	x = mid(8,x,122)
	y = mid(8,y,90)
	
	if abs(dx) < 0.5 then
		dx = 0 
	end
end

function _draw()

	drawbackground()

	draw_character()
	palt()
end

function drawbackground()
	cls(15)
	fillp()
	rectfill(0,0,127,66,14)

	local c = {12,13,14}
	for i=1,6 do
		if i%2 == 0 then
			col = 2
		else
			col = 3
		end
				fillp(0b0000101001001010)
		rectfill(0,62+(i*4),127,66+(i*4),c[col])

	end
	palt(0,false)
	palt(13,true)
--	for i=0,14 do
--		palt(i,i+1)
--	end

	sspr(56,0,16,16,10,71,20,20)
	sspr(56,0,16,16,50,71,20,20)
	sspr(56,0,16,16,80,71,25,25)
	
end

function draw_character()
	palt(0,false)
	palt(7,true)
	spr(sprites[s],x,y,2,2,flipx, flipy)
end
-->8
-- to do list

--add light effects when saber
--hits an object
--
--walking movement in feet
--
--sound effects
--
--open and close lightsaber
--background with planets
__gfx__
00000000777777777777777777777777777777777777777777777777dddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000777777809777777777777780077777777777778807777777dddddddddddddddd00000000000000000000000000000000000000000000000000000000
00700700777778980777777777777899877777777777788987777777ddddd55ffffddddd00000000000000000000000000000000000000000000000000000000
00077000777778088777777777777880877777777777788087777777dddd55ffff7fdddd00000000000000000000000000000000000000000000000000000000
00077000777778808777778777777888077777777777788807777777ddd5fffffff7fddd00000000000000000000000000000000000000000000000000000000
00700700777777808777788777777780877777777777778807777777dd55ffffffffffdd00000000000000000000000000000000000000000000000000000000
00000000777700888777887777777788877777877777778887777787d5fffffffffffffd00000000000000000000000000000000000000000000000000000000
00000000777700000078877777778000007778287777700000777887d55ffffffffffffd00000000000000000000000000000000000000000000000000000000
00000000777700000588777777780000017788287777000001778877555555555555555500000000000000000000000000000000000000000000000000000000
0000000077700100550777777782010010118828777701001011877755ffffffffffffff00000000000000000000000000000000000000000000000000000000
000000007770010550077777772201000002822777770100000077775ffffffffff00ff700000000000000000000000000000000000000000000000000000000
0000000077770855100777777828200000828287777780000007777755ff7f0000f50ff700000000000000000000000000000000000000000000000000000000
000000007777880010777777782880001288228777788000107777775ffff75550f50f7f00000000000000000000000000000000000000000000000000000000
0000000077788010007777777888701088822877778870100077777755ffff5550fffff700000000000000000000000000000000000000000000000000000000
00000000778801100007777778877018288877777887701001077777f55fff5550fff55f00000000000000000000000000000000000000000000000000000000
000000007880000000077777777770000100777777777000010077775f5fff5550ff7ff500000000000000000000000000000000000000000000000000000000
00000000777777777777777777777888822777777777777777777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777780977777777778228092277777777777809777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777898077777777782289808877777777778980777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777808877777777788880882277777777778088777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777880877777877788828088227777778778808777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777780877778877788828087827777778877808777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777770088877788777778008887777777777800888777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777770000007887777777000000777777777700000077777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777770000018877777777700001777777777770000177777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777700100100777777777710010077777777771001007777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777700100100777777777710000077777777771000007777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777770880100777777777000800007777777700000000777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777778800107777777777000888007777777700001000777000000000000000000000000000000000000000000000000000000000000000000000000
00000000777788010007777777777001028888777777700100078877000000000000000000000000000000000000000000000000000000000000000000000000
00000000777880110000777777770008082228877777000100007887000000000000000000000000000000000000000000000000000000000000000000000000
00000000778800000000777777770002888888887777000000007788000000000000000000000000000000000000000000000000000000000000000000000000
